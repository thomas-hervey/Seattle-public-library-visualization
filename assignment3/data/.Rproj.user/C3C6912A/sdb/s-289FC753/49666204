{
    "contents" : "---\ntitle: \"SPL\"\nauthor: \"Thomas Hervey\"\ndate: \"3.18.16\"\noutput: pdf_document\n---\n\n```{r echo=FALSE}\n# load starting data\nrm(list=ls())\n#par(mar=c(1,1,1,1))\ndat = read.csv(\"FINAL_working.csv\", header=TRUE)\ndat[]\n# get columns\nbib = dat[,1]\nisbn = dat[,2]\nbookType = dat[,3]\ntitle = dat[,4]\npublishDate = dat[,5]\npublishOrder = dat[,6]\nfirstCheckOut = dat[,7]\nlastCheckOut = dat[,8]f\nadoption = dat[,9]\npublishDay = dat[,10]\nfcheckoutDay = dat[,11]\nageFull = dat[,12]\nageCheckouts = dat[,13]\ny2006 = dat[,14]\ny2007 = dat[,15]\ny2008 = dat[,16]\ny2009 = dat[,17]\ny2010 = dat[,18]\ny2011 = dat[,19]\ny2012 = dat[,20]\ny2013 = dat[,21]\ny2014 = dat[,22]\ny2015 = dat[,23]\ntotalCheckout = dat[,24]\ndeweyNumber = dat[,25]\ndeweyCategory = dat[,26]\n\n# label column names\ncolnames(dat) = c(\"bib\",\"isbn\", \"bookType\", \"title\",\t\"publishDate\", \"publishOrder\", \"firstCheckOutlastCheckOut\", \"adoption\", \"publishDay\", \"fcheckoutDay\", \"ageFull\", \"ageCheckouts\", \"y2006\", \"y2007\", \"y2008\", \"y2009\", \"y2010\", \"y2011\", \"y2012\", \"y2013\", \"y2014\", \"y2015\", \"totalCheckout\", \"deweyNumber\", \"deweyCategory\")\n\npreNorm_2006 = c()\nfor(j in y2006){\n  if(j != 10000){\n    preNorm_2006 <- append(preNorm_2006, j)\n  }\n}\npreNorm_2007 = c()\nfor(j in y2007){\n  if(j != 10000){\n    preNorm_2007 <- append(preNorm_2007, j)\n  }\n}\npreNorm_2008 = c()\nfor(j in y2008){\n  if(j != 10000){\n    preNorm_2008 <- append(preNorm_2008, j)\n  }\n}\npreNorm_2009 = c()\nfor(j in y2009){\n  if(j != 10000){\n    preNorm_2009 <- append(preNorm_2009, j)\n  }\n}\npreNorm_2010 = c()\nfor(j in y2010){\n  if(j != 10000){\n    preNorm_2010 <- append(preNorm_2010, j)\n  }\n}\npreNorm_2011 = c()\nfor(j in y2011){\n  if(j != 10000){\n    preNorm_201 <- append(preNorm_201, j)\n  }\n}\npreNorm_2012 = c()\nfor(j in y2012){\n  if(j != 10000){\n    preNorm_2012 <- append(preNorm_2012, j)\n  }\n}\npreNorm_2013 = c()\nfor(j in y2013){\n  if(j != 10000){\n    preNorm_2013 <- append(preNorm_2013, j)\n  }\n}\npreNorm_2014 = c()\nfor(j in y2014){\n  if(j != 10000){\n    preNorm_2014 <- append(preNorm_2014, j)\n  }\n}\npreNorm_2015 = c()\nfor(j in y2015){\n  if(j != 10000){\n    preNorm_2015 <- append(preNorm_2015, j)\n  }\n}\n```\n_____________________________________________________________\n#SECTION 1: EXPLORING THE DATA\n\n\n```{r}\nlibrary(MASS)\n?fitdistr\n\nplot(publishOrder, adoption, main=\"Adoption over Publication Order\", ylab=\"Adoption [days]\", xlab=\"Publication Order\")\nlines(publishOrder, adoption)\npoints(publishOrder, adoption, lty=1, col=\"red\", lwd=1)\nhist(adoption, breaks=500)\n#t-test (lower adoption vs higher adoption)\n# running average\nt.test(adoption)\n\nlowerMedian_adoption = c()\nfor(j in adoption){\n  if(j <= median(adoption)){\n    lowerMedian_adoption <- append(lowerMedian_adoption, j)\n  }\n}\nt.test(lowerMedian_adoption)\n\nupperMedian_adoption = c()\nfor(j in adoption){\n  if(j >= median(adoption)){\n    upperMedian_adoption <- append(upperMedian_adoption, j)\n  }\n}\nt.test(upperMedian_adoption)\n\n# MEAN\nlowerMean_adoption = c()\nfor(j in adoption){\n  if(j <= mean(adoption)){\n    lowerMean_adoption <- append(lowerMean_adoption, j)\n  }\n}\nt.test(lowerMean_adoption)\n\nupperMean_adoption = c()\nfor(j in adoption){\n  if(j >= mean(adoption)){\n    upperMean_adoption <- append(upperMean_adoption, j)\n  }\n}\nt.test(upperMean_adoption)\n\n\n\n\n\nSD_adoption = sd(adoption)\nMEAN_adoption = mean(adoption)\nsummary(adoption)\nhist(adoption, breaks = 30)\n\nCOV_adoption = cov(publishOrder, adoption)\nCOR_adoption = cor(publishOrder, adoption)\n\n#make quantitative so that I can correlate\n# break myself (1,2,3-4, etc.)\n\nmean(adoption)\n\nfitdistr(adoption,\"f\", start=list(df1=1000, df2=1))\nfitdistr(adoption, \"weibull\")\nhist(adoption, breaks = 30)\n\nZ_adoption = (adoption - mean(adoption))/ sd(adoption)\nZ_publication = (publishOrder - mean(publishOrder)) / sd(publishOrder)\n\nhist(Z_adoption,breaks=20, col= \"red\", prob= TRUE, main=\"Adoption Z-Score Distribution, 20 breaks\", xlab=\"Z-score\", ylab=\"count\")\ncurve(dnorm(x, mean=mean(Z_adoption), sd=sd(Z_adoption)), \n          col=\"black\", lwd=2, add=TRUE, yaxt=\"n\")\nlegend(\"topleft\", ncol=2, legend=c(\"20 breaks\"), col=c(\"red\"), lwd=1, cex=.2)\n\nqqnorm(Z_adoption,main= \"Adoption\")\nqqline(Z_adoption, col= \"red\")\n\nprob_adoption = 100*dnorm(tail(Z_adoption, n=1))\n```\n\n\n\n\n\n\n```{r}\ncor(preNorm_2015, deweyNumber)\nplot(preNorm_2015, deweyNumber)\n```\n\n\n\n\n\nSCRATCH WORK **********************************\n```{r echo=FALSE}\nlibrary(MASS)\n?fitdistr\n\n# ***** exploring adoptions *****\n\nplot(publishOrder, adoption, main=\"Publication Order and Adoption\", xlab=\"Publication Order (Dates Ordered)\", ylab=\"Adoption (1st checkout - Pub Date) (days)\")\nhist(adoption, prob= TRUE)\ncurve(dnorm(x, mean=mean(adoption), sd=sd(adoption)), col=\"black\", lwd=2, add=TRUE, yaxt=\"n\")\n\nhist(adoption)\nhist(adoption, prob= TRUE)\nhist(sqrt(sqrt(adoption)), prob= TRUE)\n\nfitdistr(adoption, \"lognormal\")\nadoption_plnorm = plnorm(adoption,4.22030793,1.50353099)\nadoption_qnorm = qnorm(adoption_plnorm)\n\nhist(adoption_qnorm, breaks=30, prob=TRUE, xlab= \"Percent Children with Stunted Growth\", main=\"Log Base Normalized Stunted Growth Distribution\")\ncurve(dnorm(x, mean=mean(adoption), sd=sd(adoption)), col=\"blue\", lwd=2, add=TRUE)\n\nqqnorm(adoption_qnorm, main= \"Log Base Normalized Stunted Growth Quantile Plot\")\nqqline (adoption_qnorm, col=\"blue\")\n\nshapiro.test(adoption_qnorm)\n\n#plot(deweyNumber, adoption, main=\"Publication Order and Adoption\", xlab=\"Publication Order (Dates Ordered)\", ylab=\"Adoption (1st checkout - Pub Date) (days)\")\n\n\n# ***** exploring checkouts *****\n\n\n```\n\n_____________________________________________________________\n#SECTION 2: EXPLORING NORMALIZATION\n```{r echo=FALSE}\nlibrary(MASS)\n?fitdistr\n\n# 2006\npreNorm_2006 = c()\nfor(j in y2006){\n  if(j != 10000){\n    preNorm_2006 <- append(preNorm_2006, j)\n  }\n}\nhist((preNorm_2006)^(1/4))\nhist(log10(preNorm_2006))\nhist(preNorm_2006)\nhist(log(log(preNorm_2006)))\n\nshapiro.test(preNorm_2006)\n\nshapiro.test(log(log(preNorm_2006)))\n\n\n\n# 2015\npreNorm_2015 = c()\nfor(j in y2015){\n  if(j != 10000){\n    preNorm_2015 <- append(preNorm_2015, j)\n  }\n}\nhist(log(log(preNorm_2015)))\nshapiro.test(log(log(preNorm_2015)))\n\nplot(publishOrder, adoption)\n\nplot(deweyNumber, totalCheckout) #total dewey\nplot(deweyNumber, adoption) #total & lumping(ranges ie. 100 vs 200) t-test statistic (take into account that there are large differences between each dewey category in terms of count) (Ud-u)/o -> F(sqrt(n))\nplot(publishDay, fcheckoutDay, col = totalCheckout, xlab=\"Publish [day of year]\", ylab=\"First Checkout [day of year]\", main=\"Book Adoption Day of Year\") #t-test\nlegend(\"topleft\", ncol=4, legend=c(\"1\", \"2\", \"3\", \"4\"), col=c(\"Black\", \"Blue\", \"Green\", \"Yellow\"), lwd=1, cex=.5)\n\n#adopton = N(u,o)\n#gievn this adoption rate, and transform the numbers into z scores & average\n\n\nplot(publishOrder[1:222], preNorm_2006)\nplot(publishOrder[1:432], preNorm_2007)\nplot(publishOrder[1:222], preNorm_2008)\nplot(publishOrder[1:222], preNorm_2006)\nhist()\n```\n\n\n\n",
    "created" : 1457805164320.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2260069617",
    "id" : "49666204",
    "lastKnownWriteTime" : 1458066109,
    "path" : "~/Projects/education/academic/MAT259/assignment3/data/SPL.Rmd",
    "project_path" : "SPL.Rmd",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_markdown"
}